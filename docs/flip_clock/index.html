<html>
	<head>
		<link rel="stylesheet" href="css/flipclock.css">

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

		<script src="js/flipclock.js"></script>
		<style>
			body {
				transition: background-color 0.3s ease;
				margin: 0;
				padding: 0;
				min-height: 100vh;
			}
			body.dark-mode {
				background-color: #1a1a1a;
			}
			.dark-mode .clock {
				--flip-bg: #2d2d2d;
				--flip-text: #ffffff;
			}
			.theme-toggle {
				position: fixed;
				top: 20px;
				right: 20px;
				padding: 10px 20px;
				border: none;
				border-radius: 5px;
				background-color: #333;
				color: white;
				cursor: pointer;
				transition: background-color 0.3s ease;
				z-index: 1000;
			}
			.theme-toggle:hover {
				background-color: #444;
			}
			.dark-mode .theme-toggle {
				background-color: #666;
			}
			.dark-mode .theme-toggle:hover {
				background-color: #777;
			}
			.clock-container {
				position: fixed;
				top: 0;
				left: 80%;
				right: 0;
				bottom: 0;
				display: flex;
				justify-content: center;
				align-items: center;
				width: 100vw;
				height: 100vh;
				pointer-events: none; /* allow button clicks through container */
			}
			.clock {
				transform: scale(2);
				pointer-events: auto; /* allow interaction with clock if needed */
				transform-origin: center center;
				margin: 0 !important;
			}
			.clock * {
				margin: 0 !important;
				padding: 0 !important;
				box-sizing: border-box;
			}
			/* Ensure the flip clock elements scale properly */
			.clock .flip-clock-wrapper {
				display: inline-block;
			}
			.clockface-toggle {
				position: fixed;
				top: 60px;
				right: 20px;
				padding: 10px 20px;
				border: none;
				border-radius: 5px;
				background-color: #333;
				color: white;
				cursor: pointer;
				transition: background-color 0.3s ease;
				z-index: 1000;
			}
			.clockface-toggle:hover {
				background-color: #444;
			}
			.dark-mode .clockface-toggle {
				background-color: #666;
			}
			.dark-mode .clockface-toggle:hover {
				background-color: #777;
			}
		</style>		
	</head>
	<body>
		<button class="theme-toggle" onclick="toggleDarkMode()">Toggle Dark Mode</button>
		<button class="clockface-toggle" onclick="toggleClockFace()">Switch to 12 Hour</button>
		<div class="clock-container">
			<div class="clock"></div>
		</div>

		<script type="text/javascript">
			var clock;
			var is24Hour = true;
			
			$(document).ready(function() {
				clock = $('.clock').FlipClock({
					clockFace: 'TwentyFourHourClock'
				});
			});

			function toggleDarkMode() {
				document.body.classList.toggle('dark-mode');
				// Save preference to localStorage
				const isDarkMode = document.body.classList.contains('dark-mode');
				localStorage.setItem('darkMode', isDarkMode);
			}

			function toggleClockFace() {
				if (clock) {
					clock.stop();
					$('.clock').empty();
					is24Hour = !is24Hour;
					clock = $('.clock').FlipClock({
						clockFace: is24Hour ? 'TwentyFourHourClock' : 'TwelveHourClock',
						autoStart: true
					});
					// Update button text
					document.querySelector('.clockface-toggle').textContent = is24Hour ? 'Switch to 12 Hour' : 'Switch to 24 Hour';
				}
			}

			// Check for saved dark mode preference
			if (localStorage.getItem('darkMode') === 'true') {
				document.body.classList.add('dark-mode');
			}
		</script>
		
	</body>
</html>